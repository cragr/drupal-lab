{"version":3,"file":"farbtastic.js","sources":["farbtastic.raw.js"],"sourcesContent":["/*!\n * Farbtastic: jQuery color picker plug-in v1.3u\n *\n * Licensed under the GPL license:\n *   http://www.gnu.org/licenses/gpl.html\n */\n(function($) {\n\n$.fn.farbtastic = function (options) {\n  $.farbtastic(this, options);\n  return this;\n};\n\n$.farbtastic = function (container, callback) {\n  var container = $(container).get(0);\n  return container.farbtastic || (container.farbtastic = new $._farbtastic(container, callback));\n};\n\n$._farbtastic = function (container, callback) {\n  // Store farbtastic object\n  var fb = this;\n\n  // Insert markup\n  $(container).html('<div class=\"farbtastic\"><div class=\"color\"></div><div class=\"wheel\"></div><div class=\"overlay\"></div><div class=\"h-marker marker\"></div><div class=\"sl-marker marker\"></div></div>');\n  var e = $('.farbtastic', container);\n  fb.wheel = $('.wheel', container).get(0);\n  // Dimensions\n  fb.radius = 84;\n  fb.square = 100;\n  fb.width = 194;\n\n  // Fix background PNGs in IE6\n  if (navigator.appVersion.match(/MSIE [0-6]\\./)) {\n    $('*', e).each(function () {\n      if (this.currentStyle.backgroundImage != 'none') {\n        var image = this.currentStyle.backgroundImage;\n        image = this.currentStyle.backgroundImage.substring(5, image.length - 2);\n        $(this).css({\n          'backgroundImage': 'none',\n          'filter': \"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='\" + image + \"')\"\n        });\n      }\n    });\n  }\n\n  /**\n   * Link to the given element(s) or callback.\n   */\n  fb.linkTo = function (callback) {\n    // Unbind previous nodes\n    if (typeof fb.callback == 'object') {\n      $(fb.callback).unbind('keyup', fb.updateValue);\n    }\n\n    // Reset color\n    fb.color = null;\n\n    // Bind callback or elements\n    if (typeof callback == 'function') {\n      fb.callback = callback;\n    }\n    else if (typeof callback == 'object' || typeof callback == 'string') {\n      fb.callback = $(callback);\n      fb.callback.bind('keyup', fb.updateValue);\n      if (fb.callback.get(0).value) {\n        fb.setColor(fb.callback.get(0).value);\n      }\n    }\n    return this;\n  };\n  fb.updateValue = function (event) {\n    if (this.value && this.value != fb.color) {\n      fb.setColor(this.value);\n    }\n  };\n\n  /**\n   * Change color with HTML syntax #123456\n   */\n  fb.setColor = function (color) {\n    var unpack = fb.unpack(color);\n    if (fb.color != color && unpack) {\n      fb.color = color;\n      fb.rgb = unpack;\n      fb.hsl = fb.RGBToHSL(fb.rgb);\n      fb.updateDisplay();\n    }\n    return this;\n  };\n\n  /**\n   * Change color with HSL triplet [0..1, 0..1, 0..1]\n   */\n  fb.setHSL = function (hsl) {\n    fb.hsl = hsl;\n    fb.rgb = fb.HSLToRGB(hsl);\n    fb.color = fb.pack(fb.rgb);\n    fb.updateDisplay();\n    return this;\n  };\n\n  /////////////////////////////////////////////////////\n\n  /**\n   * Retrieve the coordinates of the given event relative to the center\n   * of the widget.\n   */\n  fb.widgetCoords = function (event) {\n    var offset = $(fb.wheel).offset();\n    return { x: (event.pageX - offset.left) - fb.width / 2, y: (event.pageY - offset.top) - fb.width / 2 };\n  };\n\n  /**\n   * Mousedown handler\n   */\n  fb.mousedown = function (event) {\n    // Capture mouse\n    if (!document.dragging) {\n      $(document).bind('mousemove', fb.mousemove).bind('mouseup', fb.mouseup);\n      document.dragging = true;\n    }\n\n    // Check which area is being dragged\n    var pos = fb.widgetCoords(event);\n    fb.circleDrag = Math.max(Math.abs(pos.x), Math.abs(pos.y)) * 2 > fb.square;\n\n    // Process\n    fb.mousemove(event);\n    return false;\n  };\n\n  /**\n   * Mousemove handler\n   */\n  fb.mousemove = function (event) {\n    // Get coordinates relative to color picker center\n    var pos = fb.widgetCoords(event);\n\n    // Set new HSL parameters\n    if (fb.circleDrag) {\n      var hue = Math.atan2(pos.x, -pos.y) / 6.28;\n      if (hue < 0) hue += 1;\n      fb.setHSL([hue, fb.hsl[1], fb.hsl[2]]);\n    }\n    else {\n      var sat = Math.max(0, Math.min(1, -(pos.x / fb.square) + .5));\n      var lum = Math.max(0, Math.min(1, -(pos.y / fb.square) + .5));\n      fb.setHSL([fb.hsl[0], sat, lum]);\n    }\n    return false;\n  };\n\n  /**\n   * Mouseup handler\n   */\n  fb.mouseup = function () {\n    // Uncapture mouse\n    $(document).unbind('mousemove', fb.mousemove);\n    $(document).unbind('mouseup', fb.mouseup);\n    document.dragging = false;\n  };\n\n  /**\n   * Update the markers and styles\n   */\n  fb.updateDisplay = function () {\n    // Markers\n    var angle = fb.hsl[0] * 6.28;\n    $('.h-marker', e).css({\n      left: Math.round(Math.sin(angle) * fb.radius + fb.width / 2) + 'px',\n      top: Math.round(-Math.cos(angle) * fb.radius + fb.width / 2) + 'px'\n    });\n\n    $('.sl-marker', e).css({\n      left: Math.round(fb.square * (.5 - fb.hsl[1]) + fb.width / 2) + 'px',\n      top: Math.round(fb.square * (.5 - fb.hsl[2]) + fb.width / 2) + 'px'\n    });\n\n    // Saturation/Luminance gradient\n    $('.color', e).css('backgroundColor', fb.pack(fb.HSLToRGB([fb.hsl[0], 1, 0.5])));\n\n    // Linked elements or callback\n    if (typeof fb.callback == 'object') {\n      // Set background/foreground color\n      $(fb.callback).css({\n        backgroundColor: fb.color,\n        color: fb.hsl[2] > 0.5 ? '#000' : '#fff'\n      });\n\n      // Change linked value\n      $(fb.callback).each(function() {\n        if (this.value && this.value != fb.color) {\n          this.value = fb.color;\n        }\n      });\n    }\n    else if (typeof fb.callback == 'function') {\n      fb.callback.call(fb, fb.color);\n    }\n  };\n\n  /* Various color utility functions */\n  fb.pack = function (rgb) {\n    var r = Math.round(rgb[0] * 255);\n    var g = Math.round(rgb[1] * 255);\n    var b = Math.round(rgb[2] * 255);\n    return '#' + (r < 16 ? '0' : '') + r.toString(16) +\n           (g < 16 ? '0' : '') + g.toString(16) +\n           (b < 16 ? '0' : '') + b.toString(16);\n  };\n\n  fb.unpack = function (color) {\n    if (color.length == 7) {\n      return [parseInt('0x' + color.substring(1, 3)) / 255,\n        parseInt('0x' + color.substring(3, 5)) / 255,\n        parseInt('0x' + color.substring(5, 7)) / 255];\n    }\n    else if (color.length == 4) {\n      return [parseInt('0x' + color.substring(1, 2)) / 15,\n        parseInt('0x' + color.substring(2, 3)) / 15,\n        parseInt('0x' + color.substring(3, 4)) / 15];\n    }\n  };\n\n  fb.HSLToRGB = function (hsl) {\n    var m1, m2, r, g, b;\n    var h = hsl[0], s = hsl[1], l = hsl[2];\n    m2 = (l <= 0.5) ? l * (s + 1) : l + s - l*s;\n    m1 = l * 2 - m2;\n    return [this.hueToRGB(m1, m2, h+0.33333),\n        this.hueToRGB(m1, m2, h),\n        this.hueToRGB(m1, m2, h-0.33333)];\n  };\n\n  fb.hueToRGB = function (m1, m2, h) {\n    h = (h < 0) ? h + 1 : ((h > 1) ? h - 1 : h);\n    if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\n    if (h * 2 < 1) return m2;\n    if (h * 3 < 2) return m1 + (m2 - m1) * (0.66666 - h) * 6;\n    return m1;\n  };\n\n  fb.RGBToHSL = function (rgb) {\n    var min, max, delta, h, s, l;\n    var r = rgb[0], g = rgb[1], b = rgb[2];\n    min = Math.min(r, Math.min(g, b));\n    max = Math.max(r, Math.max(g, b));\n    delta = max - min;\n    l = (min + max) / 2;\n    s = 0;\n    if (l > 0 && l < 1) {\n      s = delta / (l < 0.5 ? (2 * l) : (2 - 2 * l));\n    }\n    h = 0;\n    if (delta > 0) {\n      if (max == r && max != g) h += (g - b) / delta;\n      if (max == g && max != b) h += (2 + (b - r) / delta);\n      if (max == b && max != r) h += (4 + (r - g) / delta);\n      h /= 6;\n    }\n    return [h, s, l];\n  };\n\n  // Install mousedown handler (the others are set on the document on-demand)\n  $('*', e).mousedown(fb.mousedown);\n\n    // Init color\n  fb.setColor('#000000');\n\n  // Set linked elements/callback\n  if (callback) {\n    fb.linkTo(callback);\n  }\n};\n\n})(jQuery);\n"],"names":["$","fn","farbtastic","options","this","container","callback","get","_farbtastic","fb","html","e","wheel","radius","square","width","navigator","appVersion","match","each","currentStyle","backgroundImage","image","substring","length","css","filter","linkTo","unbind","updateValue","color","bind","value","setColor","event","unpack","rgb","hsl","RGBToHSL","updateDisplay","setHSL","HSLToRGB","pack","widgetCoords","offset","x","pageX","left","y","pageY","top","mousedown","document","dragging","mousemove","mouseup","pos","circleDrag","Math","max","abs","hue","atan2","sat","min","lum","angle","round","sin","cos","backgroundColor","call","r","g","b","toString","parseInt","m1","m2","h","s","l","hueToRGB","delta","jQuery"],"mappings":"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"}