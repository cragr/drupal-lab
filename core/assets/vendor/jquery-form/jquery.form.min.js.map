{"version":3,"file":"jquery.form.min.js","sources":["jquery.form.js"],"sourcesContent":["/*!\n * jQuery Form Plugin\n * version: 4.3.0\n * Requires jQuery v1.7.2 or later\n * Project repository: https://github.com/jquery-form/form\n\n * Copyright 2017 Kevin Morris\n * Copyright 2006 M. Alsup\n\n * Dual licensed under the LGPL-2.1+ or MIT licenses\n * https://github.com/jquery-form/form#license\n\n * This library is free software; you can redistribute it and/or\n * modify it under the terms of the GNU Lesser General Public\n * License as published by the Free Software Foundation; either\n * version 2.1 of the License, or (at your option) any later version.\n * This library is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n * Lesser General Public License for more details.\n */\n/* global ActiveXObject */\n\n/* eslint-disable */\n(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine(['jquery'], factory);\n\t} else if (typeof module === 'object' && module.exports) {\n\t\t// Node/CommonJS\n\t\tmodule.exports = function( root, jQuery ) {\n\t\t\tif (typeof jQuery === 'undefined') {\n\t\t\t\t// require('jQuery') returns a factory that requires window to build a jQuery instance, we normalize how we use modules\n\t\t\t\t// that require this pattern but the window provided is a noop if it's defined (how jquery works)\n\t\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t\tjQuery = require('jquery');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjQuery = require('jquery')(root);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfactory(jQuery);\n\t\t\treturn jQuery;\n\t\t};\n\t} else {\n\t\t// Browser globals\n\t\tfactory(jQuery);\n\t}\n\n}(function ($) {\n/* eslint-enable */\n\t'use strict';\n\n\t/*\n\t\tUsage Note:\n\t\t-----------\n\t\tDo not use both ajaxSubmit and ajaxForm on the same form. These\n\t\tfunctions are mutually exclusive. Use ajaxSubmit if you want\n\t\tto bind your own submit handler to the form. For example,\n\n\t\t$(document).ready(function() {\n\t\t\t$('#myForm').on('submit', function(e) {\n\t\t\t\te.preventDefault(); // <-- important\n\t\t\t\t$(this).ajaxSubmit({\n\t\t\t\t\ttarget: '#output'\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tUse ajaxForm when you want the plugin to manage all the event binding\n\t\tfor you. For example,\n\n\t\t$(document).ready(function() {\n\t\t\t$('#myForm').ajaxForm({\n\t\t\t\ttarget: '#output'\n\t\t\t});\n\t\t});\n\n\t\tYou can also use ajaxForm with delegation (requires jQuery v1.7+), so the\n\t\tform does not have to exist when you invoke ajaxForm:\n\n\t\t$('#myForm').ajaxForm({\n\t\t\tdelegation: true,\n\t\t\ttarget: '#output'\n\t\t});\n\n\t\tWhen using ajaxForm, the ajaxSubmit function will be invoked for you\n\t\tat the appropriate time.\n\t*/\n\n\tvar rCRLF = /\\r?\\n/g;\n\n\t/**\n\t * Feature detection\n\t */\n\tvar feature = {};\n\n\tfeature.fileapi = $('<input type=\"file\">').get(0).files !== undefined;\n\tfeature.formdata = (typeof window.FormData !== 'undefined');\n\n\tvar hasProp = !!$.fn.prop;\n\n\t// attr2 uses prop when it can but checks the return type for\n\t// an expected string. This accounts for the case where a form\n\t// contains inputs with names like \"action\" or \"method\"; in those\n\t// cases \"prop\" returns the element\n\t$.fn.attr2 = function() {\n\t\tif (!hasProp) {\n\t\t\treturn this.attr.apply(this, arguments);\n\t\t}\n\n\t\tvar val = this.prop.apply(this, arguments);\n\n\t\tif ((val && val.jquery) || typeof val === 'string') {\n\t\t\treturn val;\n\t\t}\n\n\t\treturn this.attr.apply(this, arguments);\n\t};\n\n\t/**\n\t * ajaxSubmit() provides a mechanism for immediately submitting\n\t * an HTML form using AJAX.\n\t *\n\t * @param\t{object|string}\toptions\t\tjquery.form.js parameters or custom url for submission\n\t * @param\t{object}\t\tdata\t\textraData\n\t * @param\t{string}\t\tdataType\tajax dataType\n\t * @param\t{function}\t\tonSuccess\tajax success callback function\n\t */\n\t$.fn.ajaxSubmit = function(options, data, dataType, onSuccess) {\n\t\t// fast fail if nothing selected (http://dev.jquery.com/ticket/2752)\n\t\tif (!this.length) {\n\t\t\tlog('ajaxSubmit: skipping submit process - no element selected');\n\n\t\t\treturn this;\n\t\t}\n\n\t\t/* eslint consistent-this: [\"error\", \"$form\"] */\n\t\tvar method, action, url, isMsie, iframeSrc, $form = this;\n\n\t\tif (typeof options === 'function') {\n\t\t\toptions = {success: options};\n\n\t\t} else if (typeof options === 'string' || (options === false && arguments.length > 0)) {\n\t\t\toptions = {\n\t\t\t\t'url'      : options,\n\t\t\t\t'data'     : data,\n\t\t\t\t'dataType' : dataType\n\t\t\t};\n\n\t\t\tif (typeof onSuccess === 'function') {\n\t\t\t\toptions.success = onSuccess;\n\t\t\t}\n\n\t\t} else if (typeof options === 'undefined') {\n\t\t\toptions = {};\n\t\t}\n\n\t\tmethod = options.method || options.type || this.attr2('method');\n\t\taction = options.url || this.attr2('action');\n\n\t\turl = (typeof action === 'string') ? $.trim(action) : '';\n\t\turl = url || window.location.href || '';\n\t\tif (url) {\n\t\t\t// clean url (don't include hash vaue)\n\t\t\turl = (url.match(/^([^#]+)/) || [])[1];\n\t\t}\n\t\t// IE requires javascript:false in https, but this breaks chrome >83 and goes against spec.\n\t\t// Instead of using javascript:false always, let's only apply it for IE.\n\t\tisMsie = /(MSIE|Trident)/.test(navigator.userAgent || '');\n\t\tiframeSrc = (isMsie && /^https/i.test(window.location.href || '')) ? 'javascript:false' : 'about:blank'; // eslint-disable-line no-script-url\n\n\t\toptions = $.extend(true, {\n\t\t\turl       : url,\n\t\t\tsuccess   : $.ajaxSettings.success,\n\t\t\ttype      : method || $.ajaxSettings.type,\n\t\t\tiframeSrc : iframeSrc\n\t\t}, options);\n\n\t\t// hook for manipulating the form data before it is extracted;\n\t\t// convenient for use with rich editors like tinyMCE or FCKEditor\n\t\tvar veto = {};\n\n\t\tthis.trigger('form-pre-serialize', [this, options, veto]);\n\n\t\tif (veto.veto) {\n\t\t\tlog('ajaxSubmit: submit vetoed via form-pre-serialize trigger');\n\n\t\t\treturn this;\n\t\t}\n\n\t\t// provide opportunity to alter form data before it is serialized\n\t\tif (options.beforeSerialize && options.beforeSerialize(this, options) === false) {\n\t\t\tlog('ajaxSubmit: submit aborted via beforeSerialize callback');\n\n\t\t\treturn this;\n\t\t}\n\n\t\tvar traditional = options.traditional;\n\n\t\tif (typeof traditional === 'undefined') {\n\t\t\ttraditional = $.ajaxSettings.traditional;\n\t\t}\n\n\t\tvar elements = [];\n\t\tvar qx, a = this.formToArray(options.semantic, elements, options.filtering);\n\n\t\tif (options.data) {\n\t\t\tvar optionsData = $.isFunction(options.data) ? options.data(a) : options.data;\n\n\t\t\toptions.extraData = optionsData;\n\t\t\tqx = $.param(optionsData, traditional);\n\t\t}\n\n\t\t// give pre-submit callback an opportunity to abort the submit\n\t\tif (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {\n\t\t\tlog('ajaxSubmit: submit aborted via beforeSubmit callback');\n\n\t\t\treturn this;\n\t\t}\n\n\t\t// fire vetoable 'validate' event\n\t\tthis.trigger('form-submit-validate', [a, this, options, veto]);\n\t\tif (veto.veto) {\n\t\t\tlog('ajaxSubmit: submit vetoed via form-submit-validate trigger');\n\n\t\t\treturn this;\n\t\t}\n\n\t\tvar q = $.param(a, traditional);\n\n\t\tif (qx) {\n\t\t\tq = (q ? (q + '&' + qx) : qx);\n\t\t}\n\n\t\tif (options.type.toUpperCase() === 'GET') {\n\t\t\toptions.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;\n\t\t\toptions.data = null;\t// data is null for 'get'\n\t\t} else {\n\t\t\toptions.data = q;\t\t// data is the query string for 'post'\n\t\t}\n\n\t\tvar callbacks = [];\n\n\t\tif (options.resetForm) {\n\t\t\tcallbacks.push(function() {\n\t\t\t\t$form.resetForm();\n\t\t\t});\n\t\t}\n\n\t\tif (options.clearForm) {\n\t\t\tcallbacks.push(function() {\n\t\t\t\t$form.clearForm(options.includeHidden);\n\t\t\t});\n\t\t}\n\n\t\t// perform a load on the target only if dataType is not provided\n\t\tif (!options.dataType && options.target) {\n\t\t\tvar oldSuccess = options.success || function(){};\n\n\t\t\tcallbacks.push(function(data, textStatus, jqXHR) {\n\t\t\t\tvar successArguments = arguments,\n\t\t\t\t\tfn = options.replaceTarget ? 'replaceWith' : 'html';\n\n\t\t\t\t$(options.target)[fn](data).each(function(){\n\t\t\t\t\toldSuccess.apply(this, successArguments);\n\t\t\t\t});\n\t\t\t});\n\n\t\t} else if (options.success) {\n\t\t\tif ($.isArray(options.success)) {\n\t\t\t\t$.merge(callbacks, options.success);\n\t\t\t} else {\n\t\t\t\tcallbacks.push(options.success);\n\t\t\t}\n\t\t}\n\n\t\toptions.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg\n\t\t\tvar context = options.context || this;\t\t// jQuery 1.4+ supports scope context\n\n\t\t\tfor (var i = 0, max = callbacks.length; i < max; i++) {\n\t\t\t\tcallbacks[i].apply(context, [data, status, xhr || $form, $form]);\n\t\t\t}\n\t\t};\n\n\t\tif (options.error) {\n\t\t\tvar oldError = options.error;\n\n\t\t\toptions.error = function(xhr, status, error) {\n\t\t\t\tvar context = options.context || this;\n\n\t\t\t\toldError.apply(context, [xhr, status, error, $form]);\n\t\t\t};\n\t\t}\n\n\t\tif (options.complete) {\n\t\t\tvar oldComplete = options.complete;\n\n\t\t\toptions.complete = function(xhr, status) {\n\t\t\t\tvar context = options.context || this;\n\n\t\t\t\toldComplete.apply(context, [xhr, status, $form]);\n\t\t\t};\n\t\t}\n\n\t\t// are there files to upload?\n\n\t\t// [value] (issue #113), also see comment:\n\t\t// https://github.com/malsup/form/commit/588306aedba1de01388032d5f42a60159eea9228#commitcomment-2180219\n\t\tvar fileInputs = $('input[type=file]:enabled', this).filter(function() {\n\t\t\treturn $(this).val() !== '';\n\t\t});\n\t\tvar hasFileInputs = fileInputs.length > 0;\n\t\tvar mp = 'multipart/form-data';\n\t\tvar multipart = ($form.attr('enctype') === mp || $form.attr('encoding') === mp);\n\t\tvar fileAPI = feature.fileapi && feature.formdata;\n\n\t\tlog('fileAPI :' + fileAPI);\n\n\t\tvar shouldUseFrame = (hasFileInputs || multipart) && !fileAPI;\n\t\tvar jqxhr;\n\n\t\t// options.iframe allows user to force iframe mode\n\t\t// 06-NOV-09: now defaulting to iframe mode if file input is detected\n\t\tif (options.iframe !== false && (options.iframe || shouldUseFrame)) {\n\t\t\t// hack to fix Safari hang (thanks to Tim Molendijk for this)\n\t\t\t// see: http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d\n\t\t\tif (options.closeKeepAlive) {\n\t\t\t\t$.get(options.closeKeepAlive, function() {\n\t\t\t\t\tjqxhr = fileUploadIframe(a);\n\t\t\t\t});\n\n\t\t\t} else {\n\t\t\t\tjqxhr = fileUploadIframe(a);\n\t\t\t}\n\n\t\t} else if ((hasFileInputs || multipart) && fileAPI) {\n\t\t\tjqxhr = fileUploadXhr(a);\n\n\t\t} else {\n\t\t\tjqxhr = $.ajax(options);\n\t\t}\n\n\t\t$form.removeData('jqxhr').data('jqxhr', jqxhr);\n\n\t\t// clear element array\n\t\tfor (var k = 0; k < elements.length; k++) {\n\t\t\telements[k] = null;\n\t\t}\n\n\t\t// fire 'notify' event\n\t\tthis.trigger('form-submit-notify', [this, options]);\n\n\t\treturn this;\n\n\t\t// utility fn for deep serialization\n\t\tfunction deepSerialize(extraData) {\n\t\t\tvar serialized = $.param(extraData, options.traditional).split('&');\n\t\t\tvar len = serialized.length;\n\t\t\tvar result = [];\n\t\t\tvar i, part;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t// #252; undo param space replacement\n\t\t\t\tserialized[i] = serialized[i].replace(/\\+/g, ' ');\n\t\t\t\tpart = serialized[i].split('=');\n\t\t\t\t// #278; use array instead of object storage, favoring array serializations\n\t\t\t\tresult.push([decodeURIComponent(part[0]), decodeURIComponent(part[1])]);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\t// XMLHttpRequest Level 2 file uploads (big hat tip to francois2metz)\n\t\tfunction fileUploadXhr(a) {\n\t\t\tvar formdata = new FormData();\n\n\t\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\t\tformdata.append(a[i].name, a[i].value);\n\t\t\t}\n\n\t\t\tif (options.extraData) {\n\t\t\t\tvar serializedData = deepSerialize(options.extraData);\n\n\t\t\t\tfor (i = 0; i < serializedData.length; i++) {\n\t\t\t\t\tif (serializedData[i]) {\n\t\t\t\t\t\tformdata.append(serializedData[i][0], serializedData[i][1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.data = null;\n\n\t\t\tvar s = $.extend(true, {}, $.ajaxSettings, options, {\n\t\t\t\tcontentType : false,\n\t\t\t\tprocessData : false,\n\t\t\t\tcache       : false,\n\t\t\t\ttype        : method || 'POST'\n\t\t\t});\n\n\t\t\tif (options.uploadProgress) {\n\t\t\t\t// workaround because jqXHR does not expose upload property\n\t\t\t\ts.xhr = function() {\n\t\t\t\t\tvar xhr = $.ajaxSettings.xhr();\n\n\t\t\t\t\tif (xhr.upload) {\n\t\t\t\t\t\txhr.upload.addEventListener('progress', function(event) {\n\t\t\t\t\t\t\tvar percent = 0;\n\t\t\t\t\t\t\tvar position = event.loaded || event.position;\t\t\t/* event.position is deprecated */\n\t\t\t\t\t\t\tvar total = event.total;\n\n\t\t\t\t\t\t\tif (event.lengthComputable) {\n\t\t\t\t\t\t\t\tpercent = Math.ceil(position / total * 100);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\toptions.uploadProgress(event, position, total, percent);\n\t\t\t\t\t\t}, false);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn xhr;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\ts.data = null;\n\n\t\t\tvar beforeSend = s.beforeSend;\n\n\t\t\ts.beforeSend = function(xhr, o) {\n\t\t\t\t// Send FormData() provided by user\n\t\t\t\tif (options.formData) {\n\t\t\t\t\to.data = options.formData;\n\t\t\t\t} else {\n\t\t\t\t\to.data = formdata;\n\t\t\t\t}\n\n\t\t\t\tif (beforeSend) {\n\t\t\t\t\tbeforeSend.call(this, xhr, o);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn $.ajax(s);\n\t\t}\n\n\t\t// private function for handling file uploads (hat tip to YAHOO!)\n\t\tfunction fileUploadIframe(a) {\n\t\t\tvar form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;\n\t\t\tvar deferred = $.Deferred();\n\n\t\t\t// #341\n\t\t\tdeferred.abort = function(status) {\n\t\t\t\txhr.abort(status);\n\t\t\t};\n\n\t\t\tif (a) {\n\t\t\t\t// ensure that every serialized input is still enabled\n\t\t\t\tfor (i = 0; i < elements.length; i++) {\n\t\t\t\t\tel = $(elements[i]);\n\t\t\t\t\tif (hasProp) {\n\t\t\t\t\t\tel.prop('disabled', false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.removeAttr('disabled');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ts = $.extend(true, {}, $.ajaxSettings, options);\n\t\t\ts.context = s.context || s;\n\t\t\tid = 'jqFormIO' + new Date().getTime();\n\t\t\tvar ownerDocument = form.ownerDocument;\n\t\t\tvar $body = $form.closest('body');\n\n\t\t\tif (s.iframeTarget) {\n\t\t\t\t$io = $(s.iframeTarget, ownerDocument);\n\t\t\t\tn = $io.attr2('name');\n\t\t\t\tif (!n) {\n\t\t\t\t\t$io.attr2('name', id);\n\t\t\t\t} else {\n\t\t\t\t\tid = n;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t$io = $('<iframe name=\"' + id + '\" src=\"' + s.iframeSrc + '\" />', ownerDocument);\n\t\t\t\t$io.css({position: 'absolute', top: '-1000px', left: '-1000px'});\n\t\t\t}\n\t\t\tio = $io[0];\n\n\n\t\t\txhr = { // mock object\n\t\t\t\taborted               : 0,\n\t\t\t\tresponseText          : null,\n\t\t\t\tresponseXML           : null,\n\t\t\t\tstatus                : 0,\n\t\t\t\tstatusText            : 'n/a',\n\t\t\t\tgetAllResponseHeaders : function() {},\n\t\t\t\tgetResponseHeader     : function() {},\n\t\t\t\tsetRequestHeader      : function() {},\n\t\t\t\tabort                 : function(status) {\n\t\t\t\t\tvar e = (status === 'timeout' ? 'timeout' : 'aborted');\n\n\t\t\t\t\tlog('aborting upload... ' + e);\n\t\t\t\t\tthis.aborted = 1;\n\n\t\t\t\t\ttry { // #214, #257\n\t\t\t\t\t\tif (io.contentWindow.document.execCommand) {\n\t\t\t\t\t\t\tio.contentWindow.document.execCommand('Stop');\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (ignore) {}\n\n\t\t\t\t\t$io.attr('src', s.iframeSrc); // abort op in progress\n\t\t\t\t\txhr.error = e;\n\t\t\t\t\tif (s.error) {\n\t\t\t\t\t\ts.error.call(s.context, xhr, e, status);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (g) {\n\t\t\t\t\t\t$.event.trigger('ajaxError', [xhr, s, e]);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (s.complete) {\n\t\t\t\t\t\ts.complete.call(s.context, xhr, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tg = s.global;\n\t\t\t// trigger ajax global events so that activity/block indicators work like normal\n\t\t\tif (g && $.active++ === 0) {\n\t\t\t\t$.event.trigger('ajaxStart');\n\t\t\t}\n\t\t\tif (g) {\n\t\t\t\t$.event.trigger('ajaxSend', [xhr, s]);\n\t\t\t}\n\n\t\t\tif (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {\n\t\t\t\tif (s.global) {\n\t\t\t\t\t$.active--;\n\t\t\t\t}\n\t\t\t\tdeferred.reject();\n\n\t\t\t\treturn deferred;\n\t\t\t}\n\n\t\t\tif (xhr.aborted) {\n\t\t\t\tdeferred.reject();\n\n\t\t\t\treturn deferred;\n\t\t\t}\n\n\t\t\t// add submitting element to data if we know it\n\t\t\tsub = form.clk;\n\t\t\tif (sub) {\n\t\t\t\tn = sub.name;\n\t\t\t\tif (n && !sub.disabled) {\n\t\t\t\t\ts.extraData = s.extraData || {};\n\t\t\t\t\ts.extraData[n] = sub.value;\n\t\t\t\t\tif (sub.type === 'image') {\n\t\t\t\t\t\ts.extraData[n + '.x'] = form.clk_x;\n\t\t\t\t\t\ts.extraData[n + '.y'] = form.clk_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar CLIENT_TIMEOUT_ABORT = 1;\n\t\t\tvar SERVER_ABORT = 2;\n\n\t\t\tfunction getDoc(frame) {\n\t\t\t\t/* it looks like contentWindow or contentDocument do not\n\t\t\t\t * carry the protocol property in ie8, when running under ssl\n\t\t\t\t * frame.document is the only valid response document, since\n\t\t\t\t * the protocol is know but not on the other two objects. strange?\n\t\t\t\t * \"Same origin policy\" http://en.wikipedia.org/wiki/Same_origin_policy\n\t\t\t\t */\n\n\t\t\t\tvar doc = null;\n\n\t\t\t\t// IE8 cascading access check\n\t\t\t\ttry {\n\t\t\t\t\tif (frame.contentWindow) {\n\t\t\t\t\t\tdoc = frame.contentWindow.document;\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// IE8 access denied under ssl & missing protocol\n\t\t\t\t\tlog('cannot get iframe.contentWindow document: ' + err);\n\t\t\t\t}\n\n\t\t\t\tif (doc) { // successful getting content\n\t\t\t\t\treturn doc;\n\t\t\t\t}\n\n\t\t\t\ttry { // simply checking may throw in ie8 under ssl or mismatched protocol\n\t\t\t\t\tdoc = frame.contentDocument ? frame.contentDocument : frame.document;\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// last attempt\n\t\t\t\t\tlog('cannot get iframe.contentDocument: ' + err);\n\t\t\t\t\tdoc = frame.document;\n\t\t\t\t}\n\n\t\t\t\treturn doc;\n\t\t\t}\n\n\t\t\t// Rails CSRF hack (thanks to Yvan Barthelemy)\n\t\t\tvar csrf_token = $('meta[name=csrf-token]').attr('content');\n\t\t\tvar csrf_param = $('meta[name=csrf-param]').attr('content');\n\n\t\t\tif (csrf_param && csrf_token) {\n\t\t\t\ts.extraData = s.extraData || {};\n\t\t\t\ts.extraData[csrf_param] = csrf_token;\n\t\t\t}\n\n\t\t\t// take a breath so that pending repaints get some cpu time before the upload starts\n\t\t\tfunction doSubmit() {\n\t\t\t\t// make sure form attrs are set\n\t\t\t\tvar t = $form.attr2('target'),\n\t\t\t\t\ta = $form.attr2('action'),\n\t\t\t\t\tmp = 'multipart/form-data',\n\t\t\t\t\tet = $form.attr('enctype') || $form.attr('encoding') || mp;\n\n\t\t\t\t// update form attrs in IE friendly way\n\t\t\t\tform.setAttribute('target', id);\n\t\t\t\tif (!method || /post/i.test(method)) {\n\t\t\t\t\tform.setAttribute('method', 'POST');\n\t\t\t\t}\n\t\t\t\tif (a !== s.url) {\n\t\t\t\t\tform.setAttribute('action', s.url);\n\t\t\t\t}\n\n\t\t\t\t// ie borks in some cases when setting encoding\n\t\t\t\tif (!s.skipEncodingOverride && (!method || /post/i.test(method))) {\n\t\t\t\t\t$form.attr({\n\t\t\t\t\t\tencoding : 'multipart/form-data',\n\t\t\t\t\t\tenctype  : 'multipart/form-data'\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// support timout\n\t\t\t\tif (s.timeout) {\n\t\t\t\t\ttimeoutHandle = setTimeout(function() {\n\t\t\t\t\t\ttimedOut = true; cb(CLIENT_TIMEOUT_ABORT);\n\t\t\t\t\t}, s.timeout);\n\t\t\t\t}\n\n\t\t\t\t// look for server aborts\n\t\t\t\tfunction checkState() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar state = getDoc(io).readyState;\n\n\t\t\t\t\t\tlog('state = ' + state);\n\t\t\t\t\t\tif (state && state.toLowerCase() === 'uninitialized') {\n\t\t\t\t\t\t\tsetTimeout(checkState, 50);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tlog('Server abort: ', e, ' (', e.name, ')');\n\t\t\t\t\t\tcb(SERVER_ABORT);\t\t\t\t// eslint-disable-line callback-return\n\t\t\t\t\t\tif (timeoutHandle) {\n\t\t\t\t\t\t\tclearTimeout(timeoutHandle);\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttimeoutHandle = undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// add \"extra\" data to form if provided in options\n\t\t\t\tvar extraInputs = [];\n\n\t\t\t\ttry {\n\t\t\t\t\tif (s.extraData) {\n\t\t\t\t\t\tfor (var n in s.extraData) {\n\t\t\t\t\t\t\tif (s.extraData.hasOwnProperty(n)) {\n\t\t\t\t\t\t\t\t// if using the $.param format that allows for multiple values with the same name\n\t\t\t\t\t\t\t\tif ($.isPlainObject(s.extraData[n]) && s.extraData[n].hasOwnProperty('name') && s.extraData[n].hasOwnProperty('value')) {\n\t\t\t\t\t\t\t\t\textraInputs.push(\n\t\t\t\t\t\t\t\t\t\t$('<input type=\"hidden\" name=\"' + s.extraData[n].name + '\">', ownerDocument).val(s.extraData[n].value)\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(form)[0]);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\textraInputs.push(\n\t\t\t\t\t\t\t\t\t\t$('<input type=\"hidden\" name=\"' + n + '\">', ownerDocument).val(s.extraData[n])\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(form)[0]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!s.iframeTarget) {\n\t\t\t\t\t\t// add iframe to doc and submit the form\n\t\t\t\t\t\t$io.appendTo($body);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (io.attachEvent) {\n\t\t\t\t\t\tio.attachEvent('onload', cb);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tio.addEventListener('load', cb, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(checkState, 15);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tform.submit();\n\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t// just in case form has element with name/id of 'submit'\n\t\t\t\t\t\tvar submitFn = document.createElement('form').submit;\n\n\t\t\t\t\t\tsubmitFn.apply(form);\n\t\t\t\t\t}\n\n\t\t\t\t} finally {\n\t\t\t\t\t// reset attrs and remove \"extra\" input elements\n\t\t\t\t\tform.setAttribute('action', a);\n\t\t\t\t\tform.setAttribute('enctype', et); // #380\n\t\t\t\t\tif (t) {\n\t\t\t\t\t\tform.setAttribute('target', t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$form.removeAttr('target');\n\t\t\t\t\t}\n\t\t\t\t\t$(extraInputs).remove();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (s.forceSync) {\n\t\t\t\tdoSubmit();\n\t\t\t} else {\n\t\t\t\tsetTimeout(doSubmit, 10); // this lets dom updates render\n\t\t\t}\n\n\t\t\tvar data, doc, domCheckCount = 50, callbackProcessed;\n\n\t\t\tfunction cb(e) {\n\t\t\t\tif (xhr.aborted || callbackProcessed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdoc = getDoc(io);\n\t\t\t\tif (!doc) {\n\t\t\t\t\tlog('cannot access response document');\n\t\t\t\t\te = SERVER_ABORT;\n\t\t\t\t}\n\t\t\t\tif (e === CLIENT_TIMEOUT_ABORT && xhr) {\n\t\t\t\t\txhr.abort('timeout');\n\t\t\t\t\tdeferred.reject(xhr, 'timeout');\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\t\t\t\tif (e === SERVER_ABORT && xhr) {\n\t\t\t\t\txhr.abort('server abort');\n\t\t\t\t\tdeferred.reject(xhr, 'error', 'server abort');\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!doc || doc.location.href === s.iframeSrc) {\n\t\t\t\t\t// response not received yet\n\t\t\t\t\tif (!timedOut) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (io.detachEvent) {\n\t\t\t\t\tio.detachEvent('onload', cb);\n\t\t\t\t} else {\n\t\t\t\t\tio.removeEventListener('load', cb, false);\n\t\t\t\t}\n\n\t\t\t\tvar status = 'success', errMsg;\n\n\t\t\t\ttry {\n\t\t\t\t\tif (timedOut) {\n\t\t\t\t\t\tthrow 'timeout';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar isXml = s.dataType === 'xml' || doc.XMLDocument || $.isXMLDoc(doc);\n\n\t\t\t\t\tlog('isXml=' + isXml);\n\n\t\t\t\t\tif (!isXml && window.opera && (doc.body === null || !doc.body.innerHTML)) {\n\t\t\t\t\t\tif (--domCheckCount) {\n\t\t\t\t\t\t\t// in some browsers (Opera) the iframe DOM is not always traversable when\n\t\t\t\t\t\t\t// the onload callback fires, so we loop a bit to accommodate\n\t\t\t\t\t\t\tlog('requeing onLoad callback, DOM not available');\n\t\t\t\t\t\t\tsetTimeout(cb, 250);\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// let this fall through because server response could be an empty document\n\t\t\t\t\t\t// log('Could not access iframe DOM after mutiple tries.');\n\t\t\t\t\t\t// throw 'DOMException: not available';\n\t\t\t\t\t}\n\n\t\t\t\t\t// log('response detected');\n\t\t\t\t\tvar docRoot = doc.body ? doc.body : doc.documentElement;\n\n\t\t\t\t\txhr.responseText = docRoot ? docRoot.innerHTML : null;\n\t\t\t\t\txhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;\n\t\t\t\t\tif (isXml) {\n\t\t\t\t\t\ts.dataType = 'xml';\n\t\t\t\t\t}\n\t\t\t\t\txhr.getResponseHeader = function(header){\n\t\t\t\t\t\tvar headers = {'content-type': s.dataType};\n\n\t\t\t\t\t\treturn headers[header.toLowerCase()];\n\t\t\t\t\t};\n\t\t\t\t\t// support for XHR 'status' & 'statusText' emulation :\n\t\t\t\t\tif (docRoot) {\n\t\t\t\t\t\txhr.status = Number(docRoot.getAttribute('status')) || xhr.status;\n\t\t\t\t\t\txhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar dt = (s.dataType || '').toLowerCase();\n\t\t\t\t\tvar scr = /(json|script|text)/.test(dt);\n\n\t\t\t\t\tif (scr || s.textarea) {\n\t\t\t\t\t\t// see if user embedded response in textarea\n\t\t\t\t\t\tvar ta = doc.getElementsByTagName('textarea')[0];\n\n\t\t\t\t\t\tif (ta) {\n\t\t\t\t\t\t\txhr.responseText = ta.value;\n\t\t\t\t\t\t\t// support for XHR 'status' & 'statusText' emulation :\n\t\t\t\t\t\t\txhr.status = Number(ta.getAttribute('status')) || xhr.status;\n\t\t\t\t\t\t\txhr.statusText = ta.getAttribute('statusText') || xhr.statusText;\n\n\t\t\t\t\t\t} else if (scr) {\n\t\t\t\t\t\t\t// account for browsers injecting pre around json response\n\t\t\t\t\t\t\tvar pre = doc.getElementsByTagName('pre')[0];\n\t\t\t\t\t\t\tvar b = doc.getElementsByTagName('body')[0];\n\n\t\t\t\t\t\t\tif (pre) {\n\t\t\t\t\t\t\t\txhr.responseText = pre.textContent ? pre.textContent : pre.innerText;\n\t\t\t\t\t\t\t} else if (b) {\n\t\t\t\t\t\t\t\txhr.responseText = b.textContent ? b.textContent : b.innerText;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (dt === 'xml' && !xhr.responseXML && xhr.responseText) {\n\t\t\t\t\t\txhr.responseXML = toXml(xhr.responseText);\t\t\t// eslint-disable-line no-use-before-define\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tdata = httpData(xhr, dt, s);\t\t\t\t\t\t// eslint-disable-line no-use-before-define\n\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tstatus = 'parsererror';\n\t\t\t\t\t\txhr.error = errMsg = (err || status);\n\t\t\t\t\t}\n\n\t\t\t\t} catch (err) {\n\t\t\t\t\tlog('error caught: ', err);\n\t\t\t\t\tstatus = 'error';\n\t\t\t\t\txhr.error = errMsg = (err || status);\n\t\t\t\t}\n\n\t\t\t\tif (xhr.aborted) {\n\t\t\t\t\tlog('upload aborted');\n\t\t\t\t\tstatus = null;\n\t\t\t\t}\n\n\t\t\t\tif (xhr.status) { // we've set xhr.status\n\t\t\t\t\tstatus = ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) ? 'success' : 'error';\n\t\t\t\t}\n\n\t\t\t\t// ordering of these callbacks/triggers is odd, but that's how $.ajax does it\n\t\t\t\tif (status === 'success') {\n\t\t\t\t\tif (s.success) {\n\t\t\t\t\t\ts.success.call(s.context, data, 'success', xhr);\n\t\t\t\t\t}\n\n\t\t\t\t\tdeferred.resolve(xhr.responseText, 'success', xhr);\n\n\t\t\t\t\tif (g) {\n\t\t\t\t\t\t$.event.trigger('ajaxSuccess', [xhr, s]);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (status) {\n\t\t\t\t\tif (typeof errMsg === 'undefined') {\n\t\t\t\t\t\terrMsg = xhr.statusText;\n\t\t\t\t\t}\n\t\t\t\t\tif (s.error) {\n\t\t\t\t\t\ts.error.call(s.context, xhr, status, errMsg);\n\t\t\t\t\t}\n\t\t\t\t\tdeferred.reject(xhr, 'error', errMsg);\n\t\t\t\t\tif (g) {\n\t\t\t\t\t\t$.event.trigger('ajaxError', [xhr, s, errMsg]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (g) {\n\t\t\t\t\t$.event.trigger('ajaxComplete', [xhr, s]);\n\t\t\t\t}\n\n\t\t\t\tif (g && !--$.active) {\n\t\t\t\t\t$.event.trigger('ajaxStop');\n\t\t\t\t}\n\n\t\t\t\tif (s.complete) {\n\t\t\t\t\ts.complete.call(s.context, xhr, status);\n\t\t\t\t}\n\n\t\t\t\tcallbackProcessed = true;\n\t\t\t\tif (s.timeout) {\n\t\t\t\t\tclearTimeout(timeoutHandle);\n\t\t\t\t}\n\n\t\t\t\t// clean up\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tif (!s.iframeTarget) {\n\t\t\t\t\t\t$io.remove();\n\t\t\t\t\t} else { // adding else to clean up existing iframe response.\n\t\t\t\t\t\t$io.attr('src', s.iframeSrc);\n\t\t\t\t\t}\n\t\t\t\t\txhr.responseXML = null;\n\t\t\t\t}, 100);\n\t\t\t}\n\n\t\t\tvar toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)\n\t\t\t\tif (window.ActiveXObject) {\n\t\t\t\t\tdoc = new ActiveXObject('Microsoft.XMLDOM');\n\t\t\t\t\tdoc.async = 'false';\n\t\t\t\t\tdoc.loadXML(s);\n\n\t\t\t\t} else {\n\t\t\t\t\tdoc = (new DOMParser()).parseFromString(s, 'text/xml');\n\t\t\t\t}\n\n\t\t\t\treturn (doc && doc.documentElement && doc.documentElement.nodeName !== 'parsererror') ? doc : null;\n\t\t\t};\n\t\t\tvar parseJSON = $.parseJSON || function(s) {\n\t\t\t\t/* jslint evil:true */\n\t\t\t\treturn window['eval']('(' + s + ')');\t\t\t// eslint-disable-line dot-notation\n\t\t\t};\n\n\t\t\tvar httpData = function(xhr, type, s) { // mostly lifted from jq1.4.4\n\n\t\t\t\tvar ct = xhr.getResponseHeader('content-type') || '',\n\t\t\t\t\txml = ((type === 'xml' || !type) && ct.indexOf('xml') >= 0),\n\t\t\t\t\tdata = xml ? xhr.responseXML : xhr.responseText;\n\n\t\t\t\tif (xml && data.documentElement.nodeName === 'parsererror') {\n\t\t\t\t\tif ($.error) {\n\t\t\t\t\t\t$.error('parsererror');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (s && s.dataFilter) {\n\t\t\t\t\tdata = s.dataFilter(data, type);\n\t\t\t\t}\n\t\t\t\tif (typeof data === 'string') {\n\t\t\t\t\tif ((type === 'json' || !type) && ct.indexOf('json') >= 0) {\n\t\t\t\t\t\tdata = parseJSON(data);\n\t\t\t\t\t} else if ((type === 'script' || !type) && ct.indexOf('javascript') >= 0) {\n\t\t\t\t\t\t$.globalEval(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t\t};\n\n\t\t\treturn deferred;\n\t\t}\n\t};\n\n\t/**\n\t * ajaxForm() provides a mechanism for fully automating form submission.\n\t *\n\t * The advantages of using this method instead of ajaxSubmit() are:\n\t *\n\t * 1: This method will include coordinates for <input type=\"image\"> elements (if the element\n\t *\tis used to submit the form).\n\t * 2. This method will include the submit element's name/value data (for the element that was\n\t *\tused to submit the form).\n\t * 3. This method binds the submit() method to the form for you.\n\t *\n\t * The options argument for ajaxForm works exactly as it does for ajaxSubmit. ajaxForm merely\n\t * passes the options argument along after properly binding events for submit elements and\n\t * the form itself.\n\t */\n\t$.fn.ajaxForm = function(options, data, dataType, onSuccess) {\n\t\tif (typeof options === 'string' || (options === false && arguments.length > 0)) {\n\t\t\toptions = {\n\t\t\t\t'url'      : options,\n\t\t\t\t'data'     : data,\n\t\t\t\t'dataType' : dataType\n\t\t\t};\n\n\t\t\tif (typeof onSuccess === 'function') {\n\t\t\t\toptions.success = onSuccess;\n\t\t\t}\n\t\t}\n\n\t\toptions = options || {};\n\t\toptions.delegation = options.delegation && $.isFunction($.fn.on);\n\n\t\t// in jQuery 1.3+ we can fix mistakes with the ready state\n\t\tif (!options.delegation && this.length === 0) {\n\t\t\tvar o = {s: this.selector, c: this.context};\n\n\t\t\tif (!$.isReady && o.s) {\n\t\t\t\tlog('DOM not ready, queuing ajaxForm');\n\t\t\t\t$(function() {\n\t\t\t\t\t$(o.s, o.c).ajaxForm(options);\n\t\t\t\t});\n\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\t// is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()\n\t\t\tlog('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (options.delegation) {\n\t\t\t$(document)\n\t\t\t\t.off('submit.form-plugin', this.selector, doAjaxSubmit)\n\t\t\t\t.off('click.form-plugin', this.selector, captureSubmittingElement)\n\t\t\t\t.on('submit.form-plugin', this.selector, options, doAjaxSubmit)\n\t\t\t\t.on('click.form-plugin', this.selector, options, captureSubmittingElement);\n\n\t\t\treturn this;\n\t\t}\n\n\t\tif (options.beforeFormUnbind) {\n\t\t\toptions.beforeFormUnbind(this, options);\n\t\t}\n\n\t\treturn this.ajaxFormUnbind()\n\t\t\t.on('submit.form-plugin', options, doAjaxSubmit)\n\t\t\t.on('click.form-plugin', options, captureSubmittingElement);\n\t};\n\n\t// private event handlers\n\tfunction doAjaxSubmit(e) {\n\t\t/* jshint validthis:true */\n\t\tvar options = e.data;\n\n\t\tif (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed\n\t\t\te.preventDefault();\n\t\t\t$(e.target).closest('form').ajaxSubmit(options); // #365\n\t\t}\n\t}\n\n\tfunction captureSubmittingElement(e) {\n\t\t/* jshint validthis:true */\n\t\tvar target = e.target;\n\t\tvar $el = $(target);\n\n\t\tif (!$el.is('[type=submit],[type=image]')) {\n\t\t\t// is this a child element of the submit el?  (ex: a span within a button)\n\t\t\tvar t = $el.closest('[type=submit]');\n\n\t\t\tif (t.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttarget = t[0];\n\t\t}\n\n\t\tvar form = target.form;\n\n\t\tform.clk = target;\n\n\t\tif (target.type === 'image') {\n\t\t\tif (typeof e.offsetX !== 'undefined') {\n\t\t\t\tform.clk_x = e.offsetX;\n\t\t\t\tform.clk_y = e.offsetY;\n\n\t\t\t} else if (typeof $.fn.offset === 'function') {\n\t\t\t\tvar offset = $el.offset();\n\n\t\t\t\tform.clk_x = e.pageX - offset.left;\n\t\t\t\tform.clk_y = e.pageY - offset.top;\n\n\t\t\t} else {\n\t\t\t\tform.clk_x = e.pageX - target.offsetLeft;\n\t\t\t\tform.clk_y = e.pageY - target.offsetTop;\n\t\t\t}\n\t\t}\n\t\t// clear form vars\n\t\tsetTimeout(function() {\n\t\t\tform.clk = form.clk_x = form.clk_y = null;\n\t\t}, 100);\n\t}\n\n\n\t// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm\n\t$.fn.ajaxFormUnbind = function() {\n\t\treturn this.off('submit.form-plugin click.form-plugin');\n\t};\n\n\t/**\n\t * formToArray() gathers form element data into an array of objects that can\n\t * be passed to any of the following ajax functions: $.get, $.post, or load.\n\t * Each object in the array has both a 'name' and 'value' property. An example of\n\t * an array for a simple login form might be:\n\t *\n\t * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]\n\t *\n\t * It is this array that is passed to pre-submit callback functions provided to the\n\t * ajaxSubmit() and ajaxForm() methods.\n\t */\n\t$.fn.formToArray = function(semantic, elements, filtering) {\n\t\tvar a = [];\n\n\t\tif (this.length === 0) {\n\t\t\treturn a;\n\t\t}\n\n\t\tvar form = this[0];\n\t\tvar formId = this.attr('id');\n\t\tvar els = (semantic || typeof form.elements === 'undefined') ? form.getElementsByTagName('*') : form.elements;\n\t\tvar els2;\n\n\t\tif (els) {\n\t\t\tels = $.makeArray(els); // convert to standard array\n\t\t}\n\n\t\t// #386; account for inputs outside the form which use the 'form' attribute\n\t\t// FinesseRus: in non-IE browsers outside fields are already included in form.elements.\n\t\tif (formId && (semantic || /(Edge|Trident)\\//.test(navigator.userAgent))) {\n\t\t\tels2 = $(':input[form=\"' + formId + '\"]').get(); // hat tip @thet\n\t\t\tif (els2.length) {\n\t\t\t\tels = (els || []).concat(els2);\n\t\t\t}\n\t\t}\n\n\t\tif (!els || !els.length) {\n\t\t\treturn a;\n\t\t}\n\n\t\tif ($.isFunction(filtering)) {\n\t\t\tels = $.map(els, filtering);\n\t\t}\n\n\t\tvar i, j, n, v, el, max, jmax;\n\n\t\tfor (i = 0, max = els.length; i < max; i++) {\n\t\t\tel = els[i];\n\t\t\tn = el.name;\n\t\t\tif (!n || el.disabled) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (semantic && form.clk && el.type === 'image') {\n\t\t\t\t// handle image inputs on the fly when semantic == true\n\t\t\t\tif (form.clk === el) {\n\t\t\t\t\ta.push({name: n, value: $(el).val(), type: el.type});\n\t\t\t\t\ta.push({name: n + '.x', value: form.clk_x}, {name: n + '.y', value: form.clk_y});\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tv = $.fieldValue(el, true);\n\t\t\tif (v && v.constructor === Array) {\n\t\t\t\tif (elements) {\n\t\t\t\t\telements.push(el);\n\t\t\t\t}\n\t\t\t\tfor (j = 0, jmax = v.length; j < jmax; j++) {\n\t\t\t\t\ta.push({name: n, value: v[j]});\n\t\t\t\t}\n\n\t\t\t} else if (feature.fileapi && el.type === 'file') {\n\t\t\t\tif (elements) {\n\t\t\t\t\telements.push(el);\n\t\t\t\t}\n\n\t\t\t\tvar files = el.files;\n\n\t\t\t\tif (files.length) {\n\t\t\t\t\tfor (j = 0; j < files.length; j++) {\n\t\t\t\t\t\ta.push({name: n, value: files[j], type: el.type});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// #180\n\t\t\t\t\ta.push({name: n, value: '', type: el.type});\n\t\t\t\t}\n\n\t\t\t} else if (v !== null && typeof v !== 'undefined') {\n\t\t\t\tif (elements) {\n\t\t\t\t\telements.push(el);\n\t\t\t\t}\n\t\t\t\ta.push({name: n, value: v, type: el.type, required: el.required});\n\t\t\t}\n\t\t}\n\n\t\tif (!semantic && form.clk) {\n\t\t\t// input type=='image' are not found in elements array! handle it here\n\t\t\tvar $input = $(form.clk), input = $input[0];\n\n\t\t\tn = input.name;\n\n\t\t\tif (n && !input.disabled && input.type === 'image') {\n\t\t\t\ta.push({name: n, value: $input.val()});\n\t\t\t\ta.push({name: n + '.x', value: form.clk_x}, {name: n + '.y', value: form.clk_y});\n\t\t\t}\n\t\t}\n\n\t\treturn a;\n\t};\n\n\t/**\n\t * Serializes form data into a 'submittable' string. This method will return a string\n\t * in the format: name1=value1&amp;name2=value2\n\t */\n\t$.fn.formSerialize = function(semantic) {\n\t\t// hand off to jQuery.param for proper encoding\n\t\treturn $.param(this.formToArray(semantic));\n\t};\n\n\t/**\n\t * Serializes all field elements in the jQuery object into a query string.\n\t * This method will return a string in the format: name1=value1&amp;name2=value2\n\t */\n\t$.fn.fieldSerialize = function(successful) {\n\t\tvar a = [];\n\n\t\tthis.each(function() {\n\t\t\tvar n = this.name;\n\n\t\t\tif (!n) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar v = $.fieldValue(this, successful);\n\n\t\t\tif (v && v.constructor === Array) {\n\t\t\t\tfor (var i = 0, max = v.length; i < max; i++) {\n\t\t\t\t\ta.push({name: n, value: v[i]});\n\t\t\t\t}\n\n\t\t\t} else if (v !== null && typeof v !== 'undefined') {\n\t\t\t\ta.push({name: this.name, value: v});\n\t\t\t}\n\t\t});\n\n\t\t// hand off to jQuery.param for proper encoding\n\t\treturn $.param(a);\n\t};\n\n\t/**\n\t * Returns the value(s) of the element in the matched set. For example, consider the following form:\n\t *\n\t *\t<form><fieldset>\n\t *\t\t<input name=\"A\" type=\"text\">\n\t *\t\t<input name=\"A\" type=\"text\">\n\t *\t\t<input name=\"B\" type=\"checkbox\" value=\"B1\">\n\t *\t\t<input name=\"B\" type=\"checkbox\" value=\"B2\">\n\t *\t\t<input name=\"C\" type=\"radio\" value=\"C1\">\n\t *\t\t<input name=\"C\" type=\"radio\" value=\"C2\">\n\t *\t</fieldset></form>\n\t *\n\t *\tvar v = $('input[type=text]').fieldValue();\n\t *\t// if no values are entered into the text inputs\n\t *\tv === ['','']\n\t *\t// if values entered into the text inputs are 'foo' and 'bar'\n\t *\tv === ['foo','bar']\n\t *\n\t *\tvar v = $('input[type=checkbox]').fieldValue();\n\t *\t// if neither checkbox is checked\n\t *\tv === undefined\n\t *\t// if both checkboxes are checked\n\t *\tv === ['B1', 'B2']\n\t *\n\t *\tvar v = $('input[type=radio]').fieldValue();\n\t *\t// if neither radio is checked\n\t *\tv === undefined\n\t *\t// if first radio is checked\n\t *\tv === ['C1']\n\t *\n\t * The successful argument controls whether or not the field element must be 'successful'\n\t * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).\n\t * The default value of the successful argument is true. If this value is false the value(s)\n\t * for each element is returned.\n\t *\n\t * Note: This method *always* returns an array. If no valid value can be determined the\n\t *\tarray will be empty, otherwise it will contain one or more values.\n\t */\n\t$.fn.fieldValue = function(successful) {\n\t\tfor (var val = [], i = 0, max = this.length; i < max; i++) {\n\t\t\tvar el = this[i];\n\t\t\tvar v = $.fieldValue(el, successful);\n\n\t\t\tif (v === null || typeof v === 'undefined' || (v.constructor === Array && !v.length)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (v.constructor === Array) {\n\t\t\t\t$.merge(val, v);\n\t\t\t} else {\n\t\t\t\tval.push(v);\n\t\t\t}\n\t\t}\n\n\t\treturn val;\n\t};\n\n\t/**\n\t * Returns the value of the field element.\n\t */\n\t$.fieldValue = function(el, successful) {\n\t\tvar n = el.name, t = el.type, tag = el.tagName.toLowerCase();\n\n\t\tif (typeof successful === 'undefined') {\n\t\t\tsuccessful = true;\n\t\t}\n\n\t\t/* eslint-disable no-mixed-operators */\n\t\tif (successful && (!n || el.disabled || t === 'reset' || t === 'button' ||\n\t\t\t(t === 'checkbox' || t === 'radio') && !el.checked ||\n\t\t\t(t === 'submit' || t === 'image') && el.form && el.form.clk !== el ||\n\t\t\ttag === 'select' && el.selectedIndex === -1)) {\n\t\t/* eslint-enable no-mixed-operators */\n\t\t\treturn null;\n\t\t}\n\n\t\tif (tag === 'select') {\n\t\t\tvar index = el.selectedIndex;\n\n\t\t\tif (index < 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar a = [], ops = el.options;\n\t\t\tvar one = (t === 'select-one');\n\t\t\tvar max = (one ? index + 1 : ops.length);\n\n\t\t\tfor (var i = (one ? index : 0); i < max; i++) {\n\t\t\t\tvar op = ops[i];\n\n\t\t\t\tif (op.selected && !op.disabled) {\n\t\t\t\t\tvar v = op.value;\n\n\t\t\t\t\tif (!v) { // extra pain for IE...\n\t\t\t\t\t\tv = (op.attributes && op.attributes.value && !(op.attributes.value.specified)) ? op.text : op.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (one) {\n\t\t\t\t\t\treturn v;\n\t\t\t\t\t}\n\n\t\t\t\t\ta.push(v);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn a;\n\t\t}\n\n\t\treturn $(el).val().replace(rCRLF, '\\r\\n');\n\t};\n\n\t/**\n\t * Clears the form data. Takes the following actions on the form's input fields:\n\t *  - input text fields will have their 'value' property set to the empty string\n\t *  - select elements will have their 'selectedIndex' property set to -1\n\t *  - checkbox and radio inputs will have their 'checked' property set to false\n\t *  - inputs of type submit, button, reset, and hidden will *not* be effected\n\t *  - button elements will *not* be effected\n\t */\n\t$.fn.clearForm = function(includeHidden) {\n\t\treturn this.each(function() {\n\t\t\t$('input,select,textarea', this).clearFields(includeHidden);\n\t\t});\n\t};\n\n\t/**\n\t * Clears the selected form elements.\n\t */\n\t$.fn.clearFields = $.fn.clearInputs = function(includeHidden) {\n\t\tvar re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list\n\n\t\treturn this.each(function() {\n\t\t\tvar t = this.type, tag = this.tagName.toLowerCase();\n\n\t\t\tif (re.test(t) || tag === 'textarea') {\n\t\t\t\tthis.value = '';\n\n\t\t\t} else if (t === 'checkbox' || t === 'radio') {\n\t\t\t\tthis.checked = false;\n\n\t\t\t} else if (tag === 'select') {\n\t\t\t\tthis.selectedIndex = -1;\n\n\t\t\t} else if (t === 'file') {\n\t\t\t\tif (/MSIE/.test(navigator.userAgent)) {\n\t\t\t\t\t$(this).replaceWith($(this).clone(true));\n\t\t\t\t} else {\n\t\t\t\t\t$(this).val('');\n\t\t\t\t}\n\n\t\t\t} else if (includeHidden) {\n\t\t\t\t// includeHidden can be the value true, or it can be a selector string\n\t\t\t\t// indicating a special test; for example:\n\t\t\t\t// $('#myForm').clearForm('.special:hidden')\n\t\t\t\t// the above would clean hidden inputs that have the class of 'special'\n\t\t\t\tif ((includeHidden === true && /hidden/.test(t)) ||\n\t\t\t\t\t(typeof includeHidden === 'string' && $(this).is(includeHidden))) {\n\t\t\t\t\tthis.value = '';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\n\t/**\n\t * Resets the form data or individual elements. Takes the following actions\n\t * on the selected tags:\n\t * - all fields within form elements will be reset to their original value\n\t * - input / textarea / select fields will be reset to their original value\n\t * - option / optgroup fields (for multi-selects) will defaulted individually\n\t * - non-multiple options will find the right select to default\n\t * - label elements will be searched against its 'for' attribute\n\t * - all others will be searched for appropriate children to default\n\t */\n\t$.fn.resetForm = function() {\n\t\treturn this.each(function() {\n\t\t\tvar el = $(this);\n\t\t\tvar tag = this.tagName.toLowerCase();\n\n\t\t\tswitch (tag) {\n\t\t\tcase 'input':\n\t\t\t\tthis.checked = this.defaultChecked;\n\t\t\t\t// fall through\n\n\t\t\tcase 'textarea':\n\t\t\t\tthis.value = this.defaultValue;\n\n\t\t\t\treturn true;\n\n\t\t\tcase 'option':\n\t\t\tcase 'optgroup':\n\t\t\t\tvar select = el.parents('select');\n\n\t\t\t\tif (select.length && select[0].multiple) {\n\t\t\t\t\tif (tag === 'option') {\n\t\t\t\t\t\tthis.selected = this.defaultSelected;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.find('option').resetForm();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tselect.resetForm();\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\tcase 'select':\n\t\t\t\tel.find('option').each(function(i) {\t\t\t\t// eslint-disable-line consistent-return\n\t\t\t\t\tthis.selected = this.defaultSelected;\n\t\t\t\t\tif (this.defaultSelected && !el[0].multiple) {\n\t\t\t\t\t\tel[0].selectedIndex = i;\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\n\t\t\tcase 'label':\n\t\t\t\tvar forEl = $(el.attr('for'));\n\t\t\t\tvar list = el.find('input,select,textarea');\n\n\t\t\t\tif (forEl[0]) {\n\t\t\t\t\tlist.unshift(forEl[0]);\n\t\t\t\t}\n\n\t\t\t\tlist.resetForm();\n\n\t\t\t\treturn true;\n\n\t\t\tcase 'form':\n\t\t\t\t// guard against an input with the name of 'reset'\n\t\t\t\t// note that IE reports the reset function as an 'object'\n\t\t\t\tif (typeof this.reset === 'function' || (typeof this.reset === 'object' && !this.reset.nodeType)) {\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\n\t\t\tdefault:\n\t\t\t\tel.find('form,input,label,select,textarea').resetForm();\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * Enables or disables any matching elements.\n\t */\n\t$.fn.enable = function(b) {\n\t\tif (typeof b === 'undefined') {\n\t\t\tb = true;\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tthis.disabled = !b;\n\t\t});\n\t};\n\n\t/**\n\t * Checks/unchecks any matching checkboxes or radio buttons and\n\t * selects/deselects and matching option elements.\n\t */\n\t$.fn.selected = function(select) {\n\t\tif (typeof select === 'undefined') {\n\t\t\tselect = true;\n\t\t}\n\n\t\treturn this.each(function() {\n\t\t\tvar t = this.type;\n\n\t\t\tif (t === 'checkbox' || t === 'radio') {\n\t\t\t\tthis.checked = select;\n\n\t\t\t} else if (this.tagName.toLowerCase() === 'option') {\n\t\t\t\tvar $sel = $(this).parent('select');\n\n\t\t\t\tif (select && $sel[0] && $sel[0].type === 'select-one') {\n\t\t\t\t\t// deselect all other options\n\t\t\t\t\t$sel.find('option').selected(false);\n\t\t\t\t}\n\n\t\t\t\tthis.selected = select;\n\t\t\t}\n\t\t});\n\t};\n\n\t// expose debug var\n\t$.fn.ajaxSubmit.debug = false;\n\n\t// helper fn for console logging\n\tfunction log() {\n\t\tif (!$.fn.ajaxSubmit.debug) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar msg = '[jquery.form] ' + Array.prototype.join.call(arguments, '');\n\n\t\tif (window.console && window.console.log) {\n\t\t\twindow.console.log(msg);\n\n\t\t} else if (window.opera && window.opera.postError) {\n\t\t\twindow.opera.postError(msg);\n\t\t}\n\t}\n}));\n"],"names":["factory","define","amd","module","exports","root","jQuery","window","require","$","rCRLF","feature","fileapi","undefined","get","files","formdata","FormData","hasProp","fn","prop","doAjaxSubmit","e","options","data","isDefaultPrevented","preventDefault","target","closest","ajaxSubmit","captureSubmittingElement","$el","is","t","length","form","clk","type","offsetX","clk_x","clk_y","offsetY","offset","pageX","left","pageY","top","offsetLeft","offsetTop","setTimeout","log","debug","msg","Array","prototype","join","call","arguments","console","opera","postError","attr2","this","attr","apply","val","jquery","dataType","onSuccess","method","action","url","iframeSrc","$form","success","trim","location","href","match","test","navigator","userAgent","extend","ajaxSettings","veto","trigger","beforeSerialize","traditional","qx","elements","a","formToArray","semantic","filtering","optionsData","isFunction","extraData","param","beforeSubmit","q","toUpperCase","indexOf","callbacks","resetForm","push","clearForm","includeHidden","oldSuccess","textStatus","jqXHR","successArguments","replaceTarget","each","isArray","merge","status","xhr","context","i","max","error","oldError","complete","oldComplete","fileInputs","filter","hasFileInputs","mp","multipart","fileAPI","jqxhr","shouldUseFrame","iframe","closeKeepAlive","fileUploadIframe","fileUploadXhr","ajax","removeData","k","deepSerialize","part","serialized","split","len","result","replace","decodeURIComponent","append","name","value","serializedData","s","contentType","processData","cache","uploadProgress","upload","addEventListener","event","percent","position","loaded","total","lengthComputable","Math","ceil","beforeSend","o","formData","el","g","id","$io","io","sub","n","timedOut","timeoutHandle","deferred","Deferred","abort","removeAttr","Date","getTime","ownerDocument","$body","iframeTarget","css","aborted","responseText","responseXML","statusText","getAllResponseHeaders","getResponseHeader","setRequestHeader","contentWindow","document","execCommand","ignore","global","active","reject","disabled","getDoc","frame","doc","err","contentDocument","csrf_token","csrf_param","doSubmit","et","setAttribute","skipEncodingOverride","encoding","enctype","timeout","cb","extraInputs","hasOwnProperty","isPlainObject","appendTo","attachEvent","checkState","state","readyState","toLowerCase","clearTimeout","submit","createElement","remove","forceSync","callbackProcessed","domCheckCount","detachEvent","removeEventListener","errMsg","isXml","XMLDocument","isXMLDoc","body","innerHTML","docRoot","documentElement","header","content-type","Number","getAttribute","dt","scr","textarea","ta","getElementsByTagName","pre","b","textContent","innerText","toXml","httpData","resolve","parseXML","ActiveXObject","async","loadXML","DOMParser","parseFromString","nodeName","parseJSON","ct","xml","dataFilter","globalEval","ajaxForm","delegation","on","selector","c","isReady","off","beforeFormUnbind","ajaxFormUnbind","els2","j","v","jmax","formId","els","makeArray","concat","map","fieldValue","constructor","required","$input","input","formSerialize","fieldSerialize","successful","tag","tagName","checked","selectedIndex","index","ops","one","op","selected","attributes","text","clearFields","clearInputs","re","replaceWith","clone","defaultChecked","defaultValue","select","parents","multiple","defaultSelected","find","forEl","list","unshift","reset","nodeType","enable","$sel","parent"],"mappings":"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"}