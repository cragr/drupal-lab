<?php

/**
 * @file
 * Provides hook implementations for Automatic Updates.
 */

use Drupal\auto_updates\ReadinessChecker\ReadinessCheckerMessages;
use Drupal\Core\Url;

/**
 * Implements hook_page_top().
 */
function auto_updates_page_top(array &$page_top) {
  /** @var \Drupal\auto_updates\ReadinessChecker\ReadinessCheckerMessages $readinessMessages */
  $readinessMessages = \Drupal::classResolver(ReadinessCheckerMessages::class);
  $readinessMessages->adminPageMessages();
}

/**
 * Implements hook_cron().
 */
function auto_updates_cron() {
  /** @var \Drupal\auto_updates\ReadinessChecker\ReadinessCheckerManager $checker_manager */
  $checker_manager = \Drupal::service('auto_updates.readiness_checker_manager');
  $checker_manager->getResults();
}

/**
 * Implements hook_modules_installed().
 */
function auto_updates_modules_installed() {
  // Run the readiness checkers when any modules are installed in case they
  // provide readiness checker services. Because ReadinessCheckerManager caches
  // the results it will not rerun checkers if the modules don't provide new
  // readiness checker services.
  /** @var \Drupal\auto_updates\ReadinessChecker\ReadinessCheckerManager $checker_manager */
  $checker_manager = \Drupal::service('auto_updates.readiness_checker_manager');
  $checker_manager->getResults();
}
